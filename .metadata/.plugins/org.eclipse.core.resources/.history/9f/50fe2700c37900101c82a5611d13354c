<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Deposit Receipt</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- html2pdf.js for generating PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>

    <style>
        th, td {
            text-align: left;
        }

        .bg-image {
            background: url('https://images.unsplash.com/photo-1605902711622-cfb43c4437d1?auto=format&fit=crop&w=1350&q=80') no-repeat center center;
            background-size: cover;
            min-height: 100vh;
            position: relative;
        }

        .bg-overlay {
            background-color: rgba(0, 0, 0, 0.6);
            min-height: 100vh;
            padding-top: 60px;
            padding-bottom: 60px;
        }
    </style>
</head>

<body class="bg-light">
    <!-- Header -->
    <div th:insert="~{@{reusable-code/header}}"></div>

    <!-- Background + Overlay -->
    <div class="bg-image">
        <div class="bg-overlay d-flex flex-column align-items-center justify-content-start text-white">

            <div class="container text-center">
                <h2 class="text-white mb-4 text-decoration-underline">Deposit Money Success</h2>

                <!-- Receipt Card -->
                <div id="receipt-section" th:if="${transaction != null}" class="card text-start shadow-lg mx-auto" style="max-width: 600px;">
                    <div class="card-header bg-success text-white text-center fs-5 fw-bold">
                        Deposit Receipt
                    </div>
                    <div class="card-body bg-white">
                        <table class="table table-bordered mb-0">
                            <tr>
                                <th>Transaction Id</th>
                                <td th:text="${transaction.tid}"></td>
                            </tr>
                            <tr>
                                <th>From Account</th>
                                <td th:text="${transaction.fromaccount}"></td>
                            </tr>
                            <tr>
                                <th>To Account</th>
                                <td>Self</td>
                            </tr>
                            <tr>
                                <th>Account Holder</th>
								<td th:text="${session.username}"></td>
                            </tr>
                            <tr>
                                <th>Amount</th>
                                <td class="text-success fw-bold" th:text="'â‚¹' + ${transaction.amount}"></td>
                            </tr>
                            <tr>
                                <th>Date and Time</th>
                                <td>
                                    <span th:text="${transaction.date}"></span>
                                    <span class="ms-2" th:text="${transaction.time}"></span>
                                </td>
                            </tr>
                            <tr>
                                <th>Transaction Type</th>
                                <td class="text-success fw-semibold" th:text="${transaction.type}">
									
									
								</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="mt-4">
                    <a href="/janta-bank" class="btn btn-outline-light me-3">Back Home</a>
                    <button class="btn btn-warning text-dark" onclick="downloadPDF()">Download Receipt</button>
                </div>
            </div>

        </div>
    </div>

    <!-- Footer -->
    <div th:insert="~{@{reusable-code/footer}}"></div>

    <!-- Download PDF Script -->
    <script>
        function downloadPDF() {
            const element = document.getElementById("receipt-section");
            const opt = {
                margin: 0.3,
                filename: 'Deposit-Receipt.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
            };
            html2pdf().set(opt).from(element).save();
        }
    </script>
</body>

</html>
